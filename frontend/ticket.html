<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Biletlerim â€“ GoPass</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="../css/global.css">
    <link rel="stylesheet" href="../css/ticket.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>

<nav class="navbar">
    <div class="logo">
        <i class="fa-solid fa-paper-plane"></i> GoPass
    </div>

    <div class="nav-links">
        <a href="index.html">Ana Sayfa</a>
        <a href="ticket.html" class="active">Biletlerim</a>
        <a href="favorites.html">Favoriler</a>
    </div>

    <div class="right-panel" id="auth-box">
        <a href="giris.html" class="btn-outline">GiriÅŸ Yap</a>
        <a href="kayit.html" class="btn-fill">Ãœye Ol</a>
    </div>
</nav>

<section class="tickets-section">
    <h2>Biletlerim</h2>

    <div id="ticket-list" class="ticket-list">
        <!-- JS ile eklenecek -->
    </div>
</section>

<script src="../js/ticket.js"></script>
<script src="../js/main.js"></script>
<div class="chat-window" id="liveChatWindow">
        <div class="chat-header">
            <div>
                <h4>GoPass Asistan</h4>
                <p>â— Ã‡evrimiÃ§i</p>
            </div>
            <i class="fa-solid fa-xmark close-chat" onclick="toggleLiveChat()"></i>
        </div>
        
        <div class="chat-body" id="chatBody">
            <div class="message bot">
                Merhaba! ğŸ‘‹ Ben GoPass Yapay Zeka AsistanÄ±. Size nasÄ±l yardÄ±mcÄ± olabilirim?
            </div>
            <div class="message bot">
                Bilet iptali, sefer saatleri veya kampanyalar hakkÄ±nda soru sorabilirsiniz.
            </div>
        </div>
        
        <form class="chat-footer" id="chatForm">
            <input type="text" id="chatInput" placeholder="MesajÄ±nÄ±zÄ± yazÄ±n..." autocomplete="off">
            <button type="submit"><i class="fa-solid fa-paper-plane"></i></button>
        </form>
    </div>

    <div class="support-widget">
        
        <div class="support-menu">
            <h4 style="color: white; margin-bottom: 15px; font-size: 1rem; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 10px;">
                Size nasÄ±l yardÄ±mcÄ± olabiliriz?
            </h4>
            
            <a href="https://wa.me/908501234567" target="_blank" class="support-link">
                <i class="fa-brands fa-whatsapp"></i>
                <span>WhatsApp Destek</span>
            </a>
            
            <a href="#" onclick="toggleLiveChat(); return false;" class="support-link">
                <i class="fa-solid fa-headset"></i>
                <span>CanlÄ± Asistan</span>
            </a>
            
            <a href="hakkimizda.html" class="support-link">
                <i class="fa-solid fa-circle-question"></i>
                <span>SÄ±kÃ§a Sorulanlar</span>
            </a>
        </div>

        <div class="support-btn">
            <i class="fa-regular fa-comments"></i>
        </div>
    </div>

    <script>
        // Sohbet Penceresini AÃ§/Kapat
        function toggleLiveChat() {
            const chatWindow = document.getElementById("liveChatWindow");
            chatWindow.classList.toggle("active");
            
            // AÃ§Ä±lÄ±nca input'a odaklansÄ±n
            if(chatWindow.classList.contains("active")) {
                setTimeout(() => document.getElementById("chatInput").focus(), 300);
            }
        }

        // Basit MesajlaÅŸma SimÃ¼lasyonu
        document.getElementById("chatForm").addEventListener("submit", function(e) {
            e.preventDefault();
            const input = document.getElementById("chatInput");
            const message = input.value.trim();
            const chatBody = document.getElementById("chatBody");

            if(!message) return;

            // 1. KullanÄ±cÄ± MesajÄ±nÄ± Ekle
            const userMsg = document.createElement("div");
            userMsg.classList.add("message", "user");
            userMsg.innerText = message;
            chatBody.appendChild(userMsg);
            
            // Inputu temizle ve aÅŸaÄŸÄ± kaydÄ±r
            input.value = "";
            chatBody.scrollTop = chatBody.scrollHeight;

            // 2. Bot CevabÄ± (SimÃ¼lasyon - 1 saniye sonra)
            setTimeout(() => {
                const botMsg = document.createElement("div");
                botMsg.classList.add("message", "bot");
                
                // Basit cevap mantÄ±ÄŸÄ±
                if(message.toLowerCase().includes("iptal")) {
                    botMsg.innerText = "Bilet iptal iÅŸlemleri iÃ§in 'Biletlerim' sayfasÄ±na gidip ilgili biletin yanÄ±ndaki 'Ä°ptal Et' butonunu kullanabilirsiniz.";
                } else if(message.toLowerCase().includes("merhaba")) {
                    botMsg.innerText = "Selamlar! Size harika bir yolculuk planlayalÄ±m mÄ±?";
                } else if(message.toLowerCase().includes("fiyat")) {
                    botMsg.innerText = "FiyatlarÄ±mÄ±z dinamik olarak deÄŸiÅŸmektedir. Ana sayfadan arama yaparak en gÃ¼ncel fiyatlarÄ± gÃ¶rebilirsiniz.";
                } else {
                    botMsg.innerText = "Åu an tÃ¼m temsilcilerimiz meÅŸgul, ancak sizi not ettim. En kÄ±sa sÃ¼rede dÃ¶neceÄŸiz.";
                }

                chatBody.appendChild(botMsg);
                chatBody.scrollTop = chatBody.scrollHeight;
            }, 1000);
        });
    </script>
</body>
</html>
